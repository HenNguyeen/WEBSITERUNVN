@model dynamic

@{
    ViewBag.Title = "Thông tin cá nhân";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="profile-container">
    <div class="profile-card">
        <div class="profile-avatar text-center">
            <img src="@(
                ((object)Model).GetType().GetProperty("Avatar") != null &&
                !string.IsNullOrEmpty((string)((object)Model).GetType().GetProperty("Avatar").GetValue(Model, null))
                    ? Url.Content((string)((object)Model).GetType().GetProperty("Avatar").GetValue(Model, null))
                    : Url.Content("~/Content/avatars/default.png")
            )"
                 alt="Avatar"
                 class="avatar-img" />

            <form action="/Account/UpdateAvatar" method="post" enctype="multipart/form-data" class="avatar-form">
                <label for="avatarFile" class="avatar-upload-btn" title="Cập nhật ảnh đại diện">
                    <i class="fas fa-camera"></i>
                </label>
                <input type="file" id="avatarFile" name="file" accept="image/*" onchange="this.form.submit()" hidden />
            </form>
        </div>

        <div class="profile-info">
            <h2 class="profile-title">Thông tin cá nhân</h2>

            <div class="profile-row">
                <span class="profile-label">Tên đăng nhập:</span>
                <span class="profile-value">@((Model.UserName ?? Model.NameCus) ?? "")</span>
            </div>

            <div class="profile-row">
                <span class="profile-label">Email:</span>
                <span class="profile-value">
                    @if (((object)Model).GetType().GetProperty("Email") != null)
                    {
                        @Model.Email
                    }
                    else if (((object)Model).GetType().GetProperty("EmailCus") != null)
                    {
                        @Model.EmailCus
                    }
                    else
                    {
                        @:""
                    }
                </span>
            </div>

            @if (((object)Model).GetType().GetProperty("RoleUser") != null)
            {
                <div class="profile-row">
                    <span class="profile-label">Quyền:</span>
                    <span class="profile-value">@Model.RoleUser</span>
                </div>
            }

            @if (((object)Model).GetType().GetProperty("PhoneCus") != null)
            {
                <div class="profile-row">
                    <span class="profile-label">Số điện thoại:</span>
                    <span class="profile-value">@Model.PhoneCus</span>
                </div>
            }
        </div>
    </div>
</div>

<style>
    .profile-container {
        display: flex;
        justify-content: center;
        padding: 40px 0;
    }

    .profile-card {
        background: #fff;
        border-radius: 16px;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
        padding: 30px;
        width: 420px;
        text-align: center;
    }

    .profile-avatar {
        margin-bottom: 20px;
        position: relative;
    }

    .avatar-img {
        width: 130px;
        height: 130px;
        border-radius: 50%;
        object-fit: cover;
        border: 3px solid #28a745;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }

    /* --- Nút thay ảnh nhỏ gọn --- */
    .avatar-upload-btn {
        position: absolute;
        bottom: 10px;
        right: 130px;
        background: #28a745;
        color: white;
        border-radius: 50%;
        padding: 6px;
        font-size: 13px;
        cursor: pointer;
        transition: 0.3s;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);
    }

        .avatar-upload-btn:hover {
            background: #218838;
            transform: scale(1.05);
        }

    .profile-info {
        text-align: left;
        margin-top: 10px;
    }

    .profile-title {
        text-align: center;
        margin-bottom: 20px;
        color: #28a745;
        font-weight: 600;
    }

    .profile-row {
        display: flex;
        justify-content: space-between;
        padding: 8px 0;
        border-bottom: 1px solid #eee;
    }

    .profile-label {
        color: #555;
        font-weight: 500;
    }

    .profile-value {
        color: #333;
    }
</style>
